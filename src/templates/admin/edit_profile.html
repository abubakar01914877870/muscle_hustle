{% extends "base.html" %}

{% block title %}Edit Profile - {{ user.email }}{% endblock %}

{% block content %}
<div class="container">
    <h2>Edit Profile: {{ user.email }}</h2>
    
    <form method="POST" action="{{ url_for('admin.edit_user_profile', user_id=user.id) }}" class="profile-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <div class="form-section">
            <h3>Personal Information</h3>
            
            <div class="form-group">
                <label for="full_name">Full Name</label>
                <input type="text" id="full_name" name="full_name" value="{{ user.full_name or '' }}">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="date_of_birth">Date of Birth</label>
                    <input type="date" id="date_of_birth" name="date_of_birth" value="{{ user.date_of_birth.strftime('%Y-%m-%d') if user.date_of_birth else '' }}">
                </div>
                
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender">
                        <option value="">Select...</option>
                        <option value="male" {% if user.gender == 'male' %}selected{% endif %}>Male</option>
                        <option value="female" {% if user.gender == 'female' %}selected{% endif %}>Female</option>
                        <option value="other" {% if user.gender == 'other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" value="{{ user.phone or '' }}">
            </div>
        </div>

        <div class="form-section">
            <h3>Physical Measurements</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="height">Height (cm)</label>
                    <input type="number" id="height" name="height" step="0.1" value="{{ user.height or '' }}">
                </div>
                
                <div class="form-group">
                    <label for="weight">Current Weight (kg)</label>
                    <input type="number" id="weight" name="weight" step="0.1" value="{{ user.weight or '' }}">
                </div>
                
                <div class="form-group">
                    <label for="target_weight">Target Weight (kg)</label>
                    <input type="number" id="target_weight" name="target_weight" step="0.1" value="{{ user.target_weight or '' }}">
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Fitness Information</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fitness_level">Fitness Level</label>
                    <select id="fitness_level" name="fitness_level">
                        <option value="">Select...</option>
                        <option value="beginner" {% if user.fitness_level == 'beginner' %}selected{% endif %}>Beginner</option>
                        <option value="intermediate" {% if user.fitness_level == 'intermediate' %}selected{% endif %}>Intermediate</option>
                        <option value="advanced" {% if user.fitness_level == 'advanced' %}selected{% endif %}>Advanced</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="fitness_goal">Fitness Goal</label>
                    <select id="fitness_goal" name="fitness_goal">
                        <option value="">Select...</option>
                        <option value="weight_loss" {% if user.fitness_goal == 'weight_loss' %}selected{% endif %}>Weight Loss</option>
                        <option value="muscle_gain" {% if user.fitness_goal == 'muscle_gain' %}selected{% endif %}>Muscle Gain</option>
                        <option value="maintenance" {% if user.fitness_goal == 'maintenance' %}selected{% endif %}>Maintenance</option>
                        <option value="endurance" {% if user.fitness_goal == 'endurance' %}selected{% endif %}>Endurance</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="activity_level">Activity Level</label>
                    <select id="activity_level" name="activity_level">
                        <option value="">Select...</option>
                        <option value="sedentary" {% if user.activity_level == 'sedentary' %}selected{% endif %}>Sedentary</option>
                        <option value="lightly_active" {% if user.activity_level == 'lightly_active' %}selected{% endif %}>Lightly Active</option>
                        <option value="moderately_active" {% if user.activity_level == 'moderately_active' %}selected{% endif %}>Moderately Active</option>
                        <option value="very_active" {% if user.activity_level == 'very_active' %}selected{% endif %}>Very Active</option>
                        <option value="extremely_active" {% if user.activity_level == 'extremely_active' %}selected{% endif %}>Extremely Active</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="workout_frequency">Workout Frequency (days/week)</label>
                    <input type="number" id="workout_frequency" name="workout_frequency" min="0" max="7" value="{{ user.workout_frequency or '' }}">
                </div>
            </div>
            
            <div class="form-group">
                <label for="preferred_workout_time">Preferred Workout Time</label>
                <select id="preferred_workout_time" name="preferred_workout_time">
                    <option value="">Select...</option>
                    <option value="morning" {% if user.preferred_workout_time == 'morning' %}selected{% endif %}>Morning</option>
                    <option value="afternoon" {% if user.preferred_workout_time == 'afternoon' %}selected{% endif %}>Afternoon</option>
                    <option value="evening" {% if user.preferred_workout_time == 'evening' %}selected{% endif %}>Evening</option>
                </select>
            </div>
        </div>

        <div class="form-section">
            <h3>Health Information</h3>
            
            <div class="form-group">
                <label for="medical_conditions">Medical Conditions</label>
                <textarea id="medical_conditions" name="medical_conditions" rows="3">{{ user.medical_conditions or '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="dietary_restrictions">Dietary Restrictions</label>
                <textarea id="dietary_restrictions" name="dietary_restrictions" rows="3">{{ user.dietary_restrictions or '' }}</textarea>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{{ url_for('admin.view_user_profile', user_id=user.id) }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
