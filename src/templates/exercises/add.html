{% extends "base.html" %}

{% block title %}Add Exercise - Muscle Hustle{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='design-system.css') }}">

<style>
  .form-header {
    background: linear-gradient(135deg, var(--orange) 0%, var(--color-orange-500) 100%);
    color: var(--color-white);
    padding: var(--space-24) var(--space-32);
    margin: calc(var(--space-24) * -1) calc(var(--space-32) * -1) var(--space-32);
    box-shadow: var(--shadow-md);
  }

  .form-header h1 {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
  }

  .form-container {
    max-width: 900px;
    margin: 0 auto;
    background-color: var(--color-surface);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-32);
    box-shadow: var(--shadow-sm);
  }

  .form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-16);
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    margin-bottom: var(--space-6);
  }

  .form-label.required::after {
    content: ' *';
    color: var(--color-error);
  }

  .form-control {
    padding: var(--space-10) var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    font-size: var(--font-size-md);
    color: var(--color-text);
    background-color: var(--color-background);
    font-family: var(--font-family-base);
    transition: border-color var(--duration-fast) var(--ease-standard);
  }

  .form-control:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: var(--focus-ring);
  }

  textarea.form-control {
    resize: vertical;
    min-height: 100px;
  }

  select.form-control {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: var(--select-caret-light);
    background-repeat: no-repeat;
    background-position: right var(--space-12) center;
    background-size: 16px;
    padding-right: var(--space-32);
  }

  .checkbox-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-8);
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    font-size: var(--font-size-sm);
    cursor: pointer;
  }

  .checkbox-label input {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--color-primary);
  }

  .radio-group {
    display: flex;
    gap: var(--space-16);
  }

  .radio-label {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    font-size: var(--font-size-sm);
    cursor: pointer;
  }

  .radio-label input {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--color-primary);
  }

  .form-actions {
    display: flex;
    gap: var(--space-12);
    justify-content: flex-end;
    margin-top: var(--space-24);
  }

  .btn {
    padding: var(--space-10) var(--space-24);
    border: none;
    border-radius: var(--radius-base);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-standard);
    text-decoration: none;
    display: inline-block;
  }

  .btn-primary {
    background-color: var(--color-primary);
    color: var(--color-btn-primary-text);
  }

  .btn-primary:hover {
    background-color: var(--color-primary-hover);
  }

  .btn-secondary {
    background-color: var(--color-secondary);
    color: var(--color-text);
    border: 1px solid var(--color-border);
  }

  .btn-secondary:hover {
    background-color: var(--color-secondary-hover);
  }

  @media (max-width: 768px) {
    .form-grid {
      grid-template-columns: 1fr;
    }

    .checkbox-group {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>

<div class="form-header">
  <h1>Add New Exercise</h1>
</div>

<div class="form-container">
  <form method="POST" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <div class="form-grid">
      <div class="form-group full-width">
        <label class="form-label required" for="name">Exercise Name</label>
        <input type="text" id="name" name="name" class="form-control" required>
      </div>

      <div class="form-group full-width">
        <label class="form-label" for="description">Description</label>
        <textarea id="description" name="description" class="form-control" rows="3"></textarea>
      </div>

      <div class="form-group">
        <label class="form-label required" for="muscle">Primary Muscle Group</label>
        <select id="muscle" name="muscle" class="form-control" required>
          <option value="">Select muscle group</option>
          <option value="Abs">Abs</option>
          <option value="Back">Back</option>
          <option value="Biceps">Biceps</option>
          <option value="Cardio">Cardio</option>
          <option value="Chest">Chest</option>
          <option value="Forearms">Forearms</option>
          <option value="Glutes">Glutes</option>
          <option value="Shoulders">Shoulders</option>
          <option value="Triceps">Triceps</option>
          <option value="Upper Legs">Upper Legs</option>
          <option value="Lower Legs">Lower Legs</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label required" for="equipment">Equipment</label>
        <select id="equipment" name="equipment" class="form-control" required>
          <option value="">Select equipment</option>
          <option value="Body Weight">Body Weight</option>
          <option value="Bands">Bands</option>
          <option value="Barbell">Barbell</option>
          <option value="Bench">Bench</option>
          <option value="Dumbbell">Dumbbell</option>
          <option value="Exercise Ball">Exercise Ball</option>
          <option value="EZ Curl Bar">EZ Curl Bar</option>
          <option value="Kettlebell">Kettlebell</option>
          <option value="Cardio Machine">Cardio Machine</option>
          <option value="Strength Machine">Strength Machine</option>
          <option value="Pullup Bar">Pullup Bar</option>
          <option value="Weight Plate">Weight Plate</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label class="form-label">Secondary Muscle Groups</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Abs"> Abs
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Back"> Back
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Biceps"> Biceps
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Chest"> Chest
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Forearms"> Forearms
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Glutes"> Glutes
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Shoulders"> Shoulders
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Triceps"> Triceps
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Upper Legs"> Upper Legs
          </label>
          <label class="checkbox-label">
            <input type="checkbox" name="secondary_muscles" value="Lower Legs"> Lower Legs
          </label>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label required">Difficulty</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="difficulty" value="Beginner" required> Beginner
          </label>
          <label class="radio-label">
            <input type="radio" name="difficulty" value="Intermediate"> Intermediate
          </label>
          <label class="radio-label">
            <input type="radio" name="difficulty" value="Advanced"> Advanced
          </label>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label required" for="type">Type</label>
        <select id="type" name="type" class="form-control" required>
          <option value="">Select type</option>
          <option value="Strength">Strength</option>
          <option value="Cardio">Cardio</option>
          <option value="Flexibility">Flexibility</option>
          <option value="Balance">Balance</option>
          <option value="Plyometric">Plyometric</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label class="form-label" for="instructions">Instructions</label>
        <textarea id="instructions" name="instructions" class="form-control" rows="5" placeholder="Enter step-by-step instructions..."></textarea>
      </div>

      <div class="form-group">
        <label class="form-label" for="reps_sets">Target Reps/Sets</label>
        <input type="text" id="reps_sets" name="reps_sets" class="form-control" placeholder="e.g., 3 sets of 10-12 reps">
      </div>

      <div class="form-group full-width">
        <label class="form-label" for="tips">Tips & Safety</label>
        <textarea id="tips" name="tips" class="form-control" rows="3"></textarea>
      </div>

      <div class="form-group full-width">
        <label class="form-label" for="common_mistakes">Common Mistakes</label>
        <textarea id="common_mistakes" name="common_mistakes" class="form-control" rows="3"></textarea>
      </div>

      <div class="form-group full-width">
        <label class="form-label">Media Type</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="media_type" value="image" checked onchange="toggleMediaInput()"> Image
          </label>
          <label class="radio-label">
            <input type="radio" name="media_type" value="video" onchange="toggleMediaInput()"> YouTube Video
          </label>
        </div>
      </div>

      <div class="form-group full-width" id="imageUploadGroup">
        <label class="form-label" for="exercise_image">Upload Image</label>
        <input type="file" id="exercise_image" name="exercise_image" class="form-control" accept="image/*">
        <small style="color: var(--color-text-secondary); margin-top: var(--space-4); display: block;">Recommended: 800x600px or larger</small>
      </div>

      <div class="form-group full-width" id="videoUrlGroup" style="display: none;">
        <label class="form-label" for="video_url">YouTube Video URL</label>
        <input type="url" id="video_url" name="video_url" class="form-control" placeholder="https://www.youtube.com/watch?v=...">
        <small style="color: var(--color-text-secondary); margin-top: var(--space-4); display: block;">Paste YouTube video URL (e.g., https://www.youtube.com/watch?v=dQw4w9WgXcQ)</small>
      </div>
    </div>

    <div class="form-actions">
      <a href="{{ url_for('exercises.index') }}" class="btn btn-secondary">Cancel</a>
      <button type="submit" class="btn btn-primary">Add Exercise</button>
    </div>
  </form>
</div>

<script>
  function toggleMediaInput() {
    const mediaType = document.querySelector('input[name="media_type"]:checked').value;
    const imageGroup = document.getElementById('imageUploadGroup');
    const videoGroup = document.getElementById('videoUrlGroup');
    const videoInput = document.getElementById('video_url');
    const imageInput = document.getElementById('exercise_image');
    
    if (mediaType === 'image') {
      imageGroup.style.display = 'flex';
      videoGroup.style.display = 'none';
      if (videoInput) {
        videoInput.removeAttribute('required');
        videoInput.value = '';
      }
    } else {
      imageGroup.style.display = 'none';
      videoGroup.style.display = 'flex';
      if (imageInput) {
        imageInput.removeAttribute('required');
        imageInput.value = '';
      }
    }
  }
  
  // Initialize on page load
  document.addEventListener('DOMContentLoaded', function() {
    toggleMediaInput();
  });
</script>

{% endblock %}
