<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Progress Tracker</title>
  <style>
    /* Design System Variables */
    :root {
      --color-white: rgba(255, 255, 255, 1);
      --color-black: rgba(0, 0, 0, 1);
      --color-cream-50: rgba(252, 252, 249, 1);
      --color-cream-100: rgba(255, 255, 253, 1);
      --color-gray-200: rgba(245, 245, 245, 1);
      --color-gray-300: rgba(167, 169, 169, 1);
      --color-gray-400: rgba(119, 124, 124, 1);
      --color-slate-500: rgba(98, 108, 113, 1);
      --color-brown-600: rgba(94, 82, 64, 1);
      --color-charcoal-700: rgba(31, 33, 33, 1);
      --color-charcoal-800: rgba(38, 40, 40, 1);
      --color-slate-900: rgba(19, 52, 59, 1);
      --color-teal-300: rgba(50, 184, 198, 1);
      --color-teal-400: rgba(45, 166, 178, 1);
      --color-teal-500: rgba(33, 128, 141, 1);
      --color-teal-600: rgba(29, 116, 128, 1);
      --color-teal-700: rgba(26, 104, 115, 1);
      --color-teal-800: rgba(41, 150, 161, 1);
      --color-red-400: rgba(255, 84, 89, 1);
      --color-red-500: rgba(192, 21, 47, 1);
      --color-orange-400: rgba(230, 129, 97, 1);
      --color-orange-500: rgba(168, 75, 47, 1);
      --color-brown-600-rgb: 94, 82, 64;
      --color-teal-500-rgb: 33, 128, 141;
      --color-slate-900-rgb: 19, 52, 59;
      --color-slate-500-rgb: 98, 108, 113;
      --color-red-500-rgb: 192, 21, 47;
      --color-red-400-rgb: 255, 84, 89;
      --color-orange-500-rgb: 168, 75, 47;
      --color-orange-400-rgb: 230, 129, 97;
      --color-bg-1: rgba(59, 130, 246, 0.08);
      --color-bg-2: rgba(245, 158, 11, 0.08);
      --color-bg-3: rgba(34, 197, 94, 0.08);
      --color-bg-4: rgba(239, 68, 68, 0.08);
      --color-bg-5: rgba(147, 51, 234, 0.08);
      --color-bg-6: rgba(249, 115, 22, 0.08);
      --color-bg-7: rgba(236, 72, 153, 0.08);
      --color-bg-8: rgba(6, 182, 212, 0.08);
      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-primary-active: var(--color-teal-700);
      --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
      --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
      --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-btn-primary-text: var(--color-cream-50);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
      --color-error: var(--color-red-500);
      --color-success: var(--color-teal-500);
      --color-warning: var(--color-orange-500);
      --color-info: var(--color-slate-500);
      --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
      --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);
      --focus-ring: 0 0 0 3px var(--color-focus-ring);
      --focus-outline: 2px solid var(--color-primary);
      --status-bg-opacity: 0.15;
      --status-border-opacity: 0.25;
      --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      --font-size-xs: 11px;
      --font-size-sm: 12px;
      --font-size-base: 14px;
      --font-size-md: 14px;
      --font-size-lg: 16px;
      --font-size-xl: 18px;
      --font-size-2xl: 20px;
      --font-size-3xl: 24px;
      --font-size-4xl: 30px;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 550;
      --font-weight-bold: 600;
      --line-height-tight: 1.2;
      --line-height-normal: 1.5;
      --letter-spacing-tight: -0.01em;
      --space-0: 0;
      --space-1: 1px;
      --space-2: 2px;
      --space-4: 4px;
      --space-6: 6px;
      --space-8: 8px;
      --space-10: 10px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;
      --space-32: 32px;
      --radius-sm: 6px;
      --radius-base: 8px;
      --radius-md: 10px;
      --radius-lg: 12px;
      --radius-full: 9999px;
      --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
      --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
      --container-sm: 640px;
      --container-md: 768px;
      --container-lg: 1024px;
      --container-xl: 1280px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --color-gray-400-rgb: 119, 124, 124;
        --color-teal-300-rgb: 50, 184, 198;
        --color-gray-300-rgb: 167, 169, 169;
        --color-gray-200-rgb: 245, 245, 245;
        --color-bg-1: rgba(29, 78, 216, 0.15);
        --color-bg-2: rgba(180, 83, 9, 0.15);
        --color-bg-3: rgba(21, 128, 61, 0.15);
        --color-bg-4: rgba(185, 28, 28, 0.15);
        --color-bg-5: rgba(107, 33, 168, 0.15);
        --color-bg-6: rgba(194, 65, 12, 0.15);
        --color-bg-7: rgba(190, 24, 93, 0.15);
        --color-bg-8: rgba(8, 145, 178, 0.15);
        --color-background: var(--color-charcoal-700);
        --color-surface: var(--color-charcoal-800);
        --color-text: var(--color-gray-200);
        --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
        --color-primary: var(--color-teal-300);
        --color-primary-hover: var(--color-teal-400);
        --color-primary-active: var(--color-teal-800);
        --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
        --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
        --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
        --color-border: rgba(var(--color-gray-400-rgb), 0.3);
        --color-error: var(--color-red-400);
        --color-success: var(--color-teal-300);
        --color-warning: var(--color-orange-400);
        --color-info: var(--color-gray-300);
        --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
        --color-btn-primary-text: var(--color-slate-900);
        --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
        --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
        --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
        --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
      }
    }

    @font-face {
      font-family: 'FKGroteskNeue';
      src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2') format('woff2');
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: var(--font-size-base);
      font-family: var(--font-family-base);
      line-height: var(--line-height-normal);
      color: var(--color-text);
      background-color: var(--color-background);
      -webkit-font-smoothing: antialiased;
    }

    body {
      margin: 0;
      padding: 0;
    }

    /* Header */
    .header {
      background-color: var(--color-surface);
      border-bottom: 1px solid var(--color-card-border);
      padding: var(--space-24) var(--space-16);
      text-align: center;
    }

    .header h1 {
      font-size: var(--font-size-4xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
      margin-bottom: var(--space-8);
      letter-spacing: var(--letter-spacing-tight);
    }

    .header p {
      color: var(--color-text-secondary);
      font-size: var(--font-size-lg);
      margin: 0;
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--space-24) var(--space-16);
    }

    /* Form Section */
    .form-section {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      padding: var(--space-24);
      margin-bottom: var(--space-32);
      box-shadow: var(--shadow-sm);
    }

    .form-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
      margin-bottom: var(--space-20);
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-16);
      margin-bottom: var(--space-20);
    }

    @media (min-width: 768px) {
      .form-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-label {
      display: block;
      margin-bottom: var(--space-8);
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
      color: var(--color-text);
    }

    .form-control {
      display: block;
      width: 100%;
      padding: var(--space-10) var(--space-12);
      font-size: var(--font-size-md);
      line-height: 1.5;
      color: var(--color-text);
      background-color: var(--color-background);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      transition: border-color var(--duration-fast) var(--ease-standard), box-shadow var(--duration-fast) var(--ease-standard);
      font-family: var(--font-family-base);
    }

    .form-control:focus {
      border-color: var(--color-primary);
      outline: none;
      box-shadow: var(--focus-ring);
    }

    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }

    .file-input-wrapper {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    .file-input {
      opacity: 0;
      position: absolute;
      z-index: -1;
    }

    .file-input-label {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-10) var(--space-12);
      background-color: var(--color-secondary);
      color: var(--color-text);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      cursor: pointer;
      transition: background-color var(--duration-fast) var(--ease-standard);
      font-size: var(--font-size-md);
    }

    .file-input-label:hover {
      background-color: var(--color-secondary-hover);
    }

    .file-name {
      margin-top: var(--space-8);
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-12) var(--space-24);
      border-radius: var(--radius-base);
      font-size: var(--font-size-md);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      border: none;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--color-primary);
      color: var(--color-btn-primary-text);
      width: 100%;
    }

    .btn-primary:hover {
      background: var(--color-primary-hover);
    }

    .btn-primary:active {
      background: var(--color-primary-active);
    }

    .btn-primary:focus-visible {
      outline: none;
      box-shadow: var(--focus-ring);
    }

    /* Chart Section */
    .chart-section {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      padding: var(--space-24);
      margin-bottom: var(--space-32);
      box-shadow: var(--shadow-sm);
    }

    .chart-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
      margin-bottom: var(--space-20);
    }

    .chart-container {
      position: relative;
      height: 300px;
      width: 100%;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 300px;
      color: var(--color-text-secondary);
      text-align: center;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: var(--space-16);
    }

    /* Timeline Section */
    .timeline-section {
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      padding: var(--space-24);
      margin-bottom: var(--space-32);
      box-shadow: var(--shadow-sm);
    }

    .timeline-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
      margin-bottom: var(--space-20);
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: var(--space-20);
    }

    .timeline-entry {
      background-color: var(--color-background);
      border: 1px solid var(--color-card-border-inner);
      border-radius: var(--radius-md);
      padding: var(--space-16);
      display: flex;
      flex-direction: column;
      gap: var(--space-16);
      transition: box-shadow var(--duration-normal) var(--ease-standard);
    }

    .timeline-entry:hover {
      box-shadow: var(--shadow-md);
    }

    @media (min-width: 640px) {
      .timeline-entry {
        flex-direction: row;
      }
    }

    .entry-image {
      flex-shrink: 0;
      width: 100%;
      height: 200px;
      border-radius: var(--radius-base);
      object-fit: cover;
      background-color: var(--color-secondary);
    }

    @media (min-width: 640px) {
      .entry-image {
        width: 150px;
        height: 150px;
      }
    }

    .entry-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--space-12);
    }

    .entry-header {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .entry-date {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      font-weight: var(--font-weight-medium);
    }

    .entry-weight {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-primary);
    }

    .entry-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: var(--space-12);
    }

    .metric-item {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .metric-label {
      font-size: var(--font-size-xs);
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: var(--font-weight-medium);
    }

    .metric-value {
      font-size: var(--font-size-lg);
      color: var(--color-text);
      font-weight: var(--font-weight-medium);
    }

    .entry-notes {
      padding-top: var(--space-12);
      border-top: 1px solid var(--color-card-border-inner);
    }

    .notes-label {
      font-size: var(--font-size-xs);
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: var(--font-weight-medium);
      margin-bottom: var(--space-6);
    }

    .notes-text {
      font-size: var(--font-size-sm);
      color: var(--color-text);
      line-height: 1.6;
    }

    .no-image {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--color-secondary);
      color: var(--color-text-secondary);
      font-size: var(--font-size-sm);
      text-align: center;
      padding: var(--space-16);
    }

    /* Success Message */
    .success-message {
      background-color: rgba(var(--color-teal-500-rgb), 0.1);
      border: 1px solid var(--color-primary);
      color: var(--color-text);
      padding: var(--space-12) var(--space-16);
      border-radius: var(--radius-base);
      margin-bottom: var(--space-20);
      display: none;
      align-items: center;
      gap: var(--space-8);
    }

    .success-message.show {
      display: flex;
    }

    /* Responsive */
    @media (max-width: 640px) {
      .header h1 {
        font-size: var(--font-size-3xl);
      }

      .form-section,
      .chart-section,
      .timeline-section {
        padding: var(--space-16);
      }

      .container {
        padding: var(--space-16);
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>Fitness Progress Tracker</h1>
    <p>Track your fitness journey with progress photos, weight, and more</p>
  </header>

  <div class="container">
    <!-- Add Progress Entry Form -->
    <section class="form-section">
      <h2>Add Progress Entry</h2>
      <div class="success-message" id="successMessage">
        <span>‚úì</span>
        <span>Entry added successfully!</span>
      </div>
      <form id="progressForm">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label" for="weight">Weight (kg) *</label>
            <input type="number" id="weight" class="form-control" step="0.1" min="0" required placeholder="e.g., 75.5">
          </div>
          <div class="form-group">
            <label class="form-label" for="bodyFat">Body Fat %</label>
            <input type="number" id="bodyFat" class="form-control" step="0.1" min="0" max="100" placeholder="e.g., 18.5">
          </div>
          <div class="form-group">
            <label class="form-label" for="water">Water Intake (L)</label>
            <input type="number" id="water" class="form-control" step="0.1" min="0" placeholder="e.g., 2.5">
          </div>
          <div class="form-group">
            <label class="form-label" for="photo">Progress Photo</label>
            <div class="file-input-wrapper">
              <input type="file" id="photo" class="file-input" accept="image/*">
              <label for="photo" class="file-input-label">Choose Photo</label>
            </div>
            <div class="file-name" id="fileName">No file chosen</div>
          </div>
          <div class="form-group full-width">
            <label class="form-label" for="notes">Notes (exercise, nutrition, feelings)</label>
            <textarea id="notes" class="form-control" placeholder="How did you feel today? What exercises did you do? What did you eat?"></textarea>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Add Entry</button>
      </form>
    </section>

    <!-- Weight Chart -->
    <section class="chart-section">
      <h2>Weight Progress (Last 30 Days)</h2>
      <div class="chart-container">
        <canvas id="weightChart"></canvas>
      </div>
      <div class="empty-state" id="chartEmptyState" style="display: none;">
        <div class="empty-state-icon">üìä</div>
        <div>No weight data yet. Add your first entry to see your progress!</div>
      </div>
    </section>

    <!-- Timeline -->
    <section class="timeline-section">
      <h2>Your Progress Timeline</h2>
      <div class="timeline" id="timeline">
        <div class="empty-state">
          <div class="empty-state-icon">üìù</div>
          <div>No entries yet. Start tracking your progress by adding your first entry above!</div>
        </div>
      </div>
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // In-memory data storage (no localStorage due to sandbox restrictions)
    let progressEntries = [];
    let weightChart = null;

    // Initialize with sample data for demonstration
    function initializeSampleData() {
      const today = new Date();
      const sampleData = [
        {
          id: Date.now() - 86400000 * 15,
          weight: 78.5,
          bodyFat: 22.0,
          water: 2.5,
          notes: 'Starting my fitness journey! Did 30 minutes of cardio and ate clean.',
          date: new Date(today - 86400000 * 15).toISOString(),
          photo: null
        },
        {
          id: Date.now() - 86400000 * 10,
          weight: 77.8,
          bodyFat: 21.5,
          water: 3.0,
          notes: 'Feeling stronger! Added weight training to my routine.',
          date: new Date(today - 86400000 * 10).toISOString(),
          photo: null
        },
        {
          id: Date.now() - 86400000 * 5,
          weight: 76.9,
          bodyFat: 20.8,
          water: 2.8,
          notes: 'Great week! Consistent workouts and meal prep paying off.',
          date: new Date(today - 86400000 * 5).toISOString(),
          photo: null
        }
      ];
      progressEntries = sampleData;
    }

    // Initialize app
    function initApp() {
      initializeSampleData();
      renderTimeline();
      renderChart();
    }

    // Handle form submission
    document.getElementById('progressForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const weight = parseFloat(document.getElementById('weight').value);
      const bodyFat = parseFloat(document.getElementById('bodyFat').value) || null;
      const water = parseFloat(document.getElementById('water').value) || null;
      const notes = document.getElementById('notes').value.trim();
      const photoInput = document.getElementById('photo');

      let photoDataUrl = null;
      if (photoInput.files && photoInput.files[0]) {
        photoDataUrl = await readFileAsDataURL(photoInput.files[0]);
      }

      const entry = {
        id: Date.now(),
        weight,
        bodyFat,
        water,
        notes,
        date: new Date().toISOString(),
        photo: photoDataUrl
      };

      progressEntries.unshift(entry);

      // Show success message
      const successMessage = document.getElementById('successMessage');
      successMessage.classList.add('show');
      setTimeout(() => {
        successMessage.classList.remove('show');
      }, 3000);

      // Reset form
      this.reset();
      document.getElementById('fileName').textContent = 'No file chosen';

      // Update UI
      renderTimeline();
      renderChart();
    });

    // Handle file input change
    document.getElementById('photo').addEventListener('change', function(e) {
      const fileName = e.target.files[0]?.name || 'No file chosen';
      document.getElementById('fileName').textContent = fileName;
    });

    // Read file as data URL
    function readFileAsDataURL(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => resolve(e.target.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    // Render timeline
    function renderTimeline() {
      const timeline = document.getElementById('timeline');

      if (progressEntries.length === 0) {
        timeline.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üìù</div>
            <div>No entries yet. Start tracking your progress by adding your first entry above!</div>
          </div>
        `;
        return;
      }

      timeline.innerHTML = progressEntries.map(entry => {
        const date = new Date(entry.date);
        const formattedDate = date.toLocaleDateString('en-US', {
          weekday: 'short',
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        });
        const formattedTime = date.toLocaleTimeString('en-US', {
          hour: '2-digit',
          minute: '2-digit'
        });

        const imageHtml = entry.photo
          ? `<img src="${entry.photo}" alt="Progress photo" class="entry-image">`
          : `<div class="entry-image no-image">No photo</div>`;

        const metricsHtml = `
          ${entry.bodyFat !== null ? `
            <div class="metric-item">
              <div class="metric-label">Body Fat</div>
              <div class="metric-value">${entry.bodyFat}%</div>
            </div>
          ` : ''}
          ${entry.water !== null ? `
            <div class="metric-item">
              <div class="metric-label">Water</div>
              <div class="metric-value">${entry.water}L</div>
            </div>
          ` : ''}
        `;

        const notesHtml = entry.notes ? `
          <div class="entry-notes">
            <div class="notes-label">Notes</div>
            <div class="notes-text">${entry.notes}</div>
          </div>
        ` : '';

        return `
          <div class="timeline-entry">
            ${imageHtml}
            <div class="entry-content">
              <div class="entry-header">
                <div class="entry-date">${formattedDate} at ${formattedTime}</div>
                <div class="entry-weight">${entry.weight} kg</div>
              </div>
              <div class="entry-metrics">
                ${metricsHtml}
              </div>
              ${notesHtml}
            </div>
          </div>
        `;
      }).join('');
    }

    // Render chart
    function renderChart() {
      const canvas = document.getElementById('weightChart');
      const emptyState = document.getElementById('chartEmptyState');

      // Filter entries from last 30 days
      const thirtyDaysAgo = new Date();
      thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

      const recentEntries = progressEntries
        .filter(entry => new Date(entry.date) >= thirtyDaysAgo)
        .sort((a, b) => new Date(a.date) - new Date(b.date));

      if (recentEntries.length === 0) {
        canvas.style.display = 'none';
        emptyState.style.display = 'flex';
        return;
      }

      canvas.style.display = 'block';
      emptyState.style.display = 'none';

      const labels = recentEntries.map(entry => {
        const date = new Date(entry.date);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      });

      const data = recentEntries.map(entry => entry.weight);

      // Get computed color values
      const rootStyles = getComputedStyle(document.documentElement);
      const primaryColor = rootStyles.getPropertyValue('--color-primary').trim();
      const textColor = rootStyles.getPropertyValue('--color-text').trim();
      const borderColor = rootStyles.getPropertyValue('--color-border').trim();

      if (weightChart) {
        weightChart.destroy();
      }

      const ctx = canvas.getContext('2d');
      weightChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'Weight (kg)',
            data: data,
            borderColor: primaryColor,
            backgroundColor: primaryColor.replace(')', ', 0.1)').replace('rgba', 'rgba').replace('rgb', 'rgba'),
            borderWidth: 2,
            fill: true,
            tension: 0.3,
            pointRadius: 4,
            pointHoverRadius: 6,
            pointBackgroundColor: primaryColor,
            pointBorderColor: '#fff',
            pointBorderWidth: 2
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              padding: 12,
              titleColor: '#fff',
              bodyColor: '#fff',
              cornerRadius: 8,
              displayColors: false,
              callbacks: {
                label: function(context) {
                  return `Weight: ${context.parsed.y} kg`;
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: false,
              ticks: {
                color: textColor,
                callback: function(value) {
                  return value + ' kg';
                }
              },
              grid: {
                color: borderColor,
                drawBorder: false
              }
            },
            x: {
              ticks: {
                color: textColor
              },
              grid: {
                color: borderColor,
                drawBorder: false
              }
            }
          }
        }
      });
    }

    // Initialize app on load
    initApp();
  </script>
</body>
</html>